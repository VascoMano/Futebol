{
  
    
        "post0": {
            "title": "Friends of Tracking - Lesson 2",
            "content": "Import . #from lib_util import display_all, flatten_json from lib_util import * from lib_statsbomb import find_entry_1stlevel, find_entry_2ndlevel, find_entry_3rdlevel, find_not_empty from lib_FCPython import createPitch import pandas as pd import numpy as np from numpy import nan import matplotlib.pyplot as plt from matplotlib.patches import Ellipse import seaborn as sns import math from IPython.core.interactiveshell import InteractiveShell InteractiveShell.ast_node_interactivity = &quot;all&quot; . /usr/local/lib/python3.6/dist-packages/statsmodels/tools/_testing.py:19: FutureWarning: pandas.util.testing is deprecated. Use the functions in the public API at pandas.testing instead. import pandas.util.testing as tm . Visualizations . Competition . df_comp = pd.read_json(path + &#39;competitions.json&#39;) df_comp.shape display_all(df_comp,20,8) . (20, 8) . competition_id season_id country_name competition_name competition_gender season_name match_updated match_available . 0 37 | 42 | England | FA Women&#39;s Super League | female | 2019/2020 | 2020-03-11T14:09:41.932138 | 2020-03-11T14:09:41.932138 | . 1 37 | 4 | England | FA Women&#39;s Super League | female | 2018/2019 | 2020-02-27T15:59:58.148 | 2020-02-27T15:59:58.148 | . 2 43 | 3 | International | FIFA World Cup | male | 2018 | 2019-12-16T23:09:16.168756 | 2019-12-16T23:09:16.168756 | . 3 11 | 4 | Spain | La Liga | male | 2018/2019 | 2020-02-27T12:19:39.458017 | 2020-02-27T12:19:39.458017 | . 4 11 | 1 | Spain | La Liga | male | 2017/2018 | 2020-02-27T12:19:39.458017 | 2020-02-27T12:19:39.458017 | . 5 11 | 2 | Spain | La Liga | male | 2016/2017 | 2020-04-01T14:15:08.846728 | 2019-12-16T23:09:16.168756 | . 6 11 | 27 | Spain | La Liga | male | 2015/2016 | 2019-12-16T23:09:16.168756 | 2019-12-16T23:09:16.168756 | . 7 11 | 26 | Spain | La Liga | male | 2014/2015 | 2019-12-16T23:09:16.168756 | 2019-12-16T23:09:16.168756 | . 8 11 | 25 | Spain | La Liga | male | 2013/2014 | 2019-12-16T23:09:16.168756 | 2019-12-16T23:09:16.168756 | . 9 11 | 24 | Spain | La Liga | male | 2012/2013 | 2019-12-16T23:09:16.168756 | 2019-12-16T23:09:16.168756 | . 10 11 | 23 | Spain | La Liga | male | 2011/2012 | 2019-12-16T23:09:16.168756 | 2019-12-16T23:09:16.168756 | . 11 11 | 22 | Spain | La Liga | male | 2010/2011 | 2019-12-16T23:09:16.168756 | 2019-12-16T23:09:16.168756 | . 12 11 | 21 | Spain | La Liga | male | 2009/2010 | 2019-12-16T23:09:16.168756 | 2019-12-16T23:09:16.168756 | . 13 11 | 41 | Spain | La Liga | male | 2008/2009 | 2019-12-16T23:09:16.168756 | 2019-12-16T23:09:16.168756 | . 14 11 | 40 | Spain | La Liga | male | 2007/2008 | 2019-12-16T23:09:16.168756 | 2019-12-16T23:09:16.168756 | . 15 11 | 39 | Spain | La Liga | male | 2006/2007 | 2019-12-16T23:09:16.168756 | 2019-12-16T23:09:16.168756 | . 16 11 | 38 | Spain | La Liga | male | 2005/2006 | 2020-02-27T12:19:39.458017 | 2020-02-27T12:19:39.458017 | . 17 11 | 37 | Spain | La Liga | male | 2004/2005 | 2019-12-16T23:09:16.168756 | 2019-12-16T23:09:16.168756 | . 18 49 | 3 | United States of America | NWSL | female | 2018 | 2020-02-27T15:22:21.167136 | 2020-01-26T02:37:05.981617 | . 19 72 | 30 | International | Women&#39;s World Cup | female | 2019 | 2020-02-27T12:19:39.458017 | 2020-02-27T12:19:39.458017 | . competition_id = 72 . Matches . df_matches = pd.read_json(path + f&#39;matches/{str(competition_id)}/30.json&#39;) df_matches.shape df_matches.head(2) . (52, 16) . match_id match_date kick_off competition season home_team away_team home_score away_score match_status last_updated metadata match_week competition_stage stadium referee . 0 68338 | 2019-06-19 | 21:00:00.000 | {&#39;competition_id&#39;: 72, &#39;country_name&#39;: &#39;Intern... | {&#39;season_id&#39;: 30, &#39;season_name&#39;: &#39;2019&#39;} | {&#39;home_team_id&#39;: 866, &#39;home_team_name&#39;: &#39;Scotl... | {&#39;away_team_id&#39;: 1204, &#39;away_team_name&#39;: &#39;Arge... | 3 | 3 | available | 2019-12-16T23:09:16.168756 | {&#39;data_version&#39;: &#39;1.1.0&#39;, &#39;shot_fidelity_versi... | 3 | {&#39;id&#39;: 1, &#39;name&#39;: &#39;Regular Season&#39;} | NaN | NaN | . 1 68357 | 2019-06-22 | 21:00:00.000 | {&#39;competition_id&#39;: 72, &#39;country_name&#39;: &#39;Intern... | {&#39;season_id&#39;: 30, &#39;season_name&#39;: &#39;2019&#39;} | {&#39;home_team_id&#39;: 852, &#39;home_team_name&#39;: &#39;Norwa... | {&#39;away_team_id&#39;: 1205, &#39;away_team_name&#39;: &#39;Aust... | 1 | 1 | available | 2020-02-27T12:19:39.458017 | {&#39;data_version&#39;: &#39;1.1.0&#39;, &#39;shot_fidelity_versi... | 4 | {&#39;id&#39;: 1, &#39;name&#39;: &#39;Regular Season&#39;} | NaN | NaN | . for i in range(df_matches.shape[0]): home_team_name = df_matches[&#39;home_team&#39;][i][&#39;home_team_name&#39;] away_team_name = df_matches[&#39;away_team&#39;][i][&#39;away_team_name&#39;] home_score = df_matches[&#39;home_score&#39;][i] away_score = df_matches[&#39;away_score&#39;][i] competition_stage = df_matches[&#39;competition_stage&#39;][i][&#39;name&#39;] print(f&#39;{i} {home_team_name} {home_score} - {away_score} {away_team_name} ...... {competition_stage}&#39;) . 0 Scotland Women&#39;s 3 - 3 Argentina Women&#39;s ...... Regular Season 1 Norway Women&#39;s 1 - 1 Australia Women&#39;s ...... Regular Season 2 Spain Women&#39;s 1 - 2 United States Women&#39;s ...... Round of 16 3 Sweden Women&#39;s 1 - 0 Canada Women&#39;s ...... Regular Season 4 Spain Women&#39;s 3 - 1 South Africa Women&#39;s ...... Regular Season 5 Germany Women&#39;s 1 - 0 China PR Women&#39;s ...... Regular Season 6 Brazil Women&#39;s 3 - 0 Jamaica Women&#39;s ...... Regular Season 7 England Women&#39;s 2 - 1 Scotland Women&#39;s ...... Regular Season 8 Australia Women&#39;s 1 - 2 Italy Women&#39;s ...... Regular Season 9 Argentina Women&#39;s 0 - 0 Japan Women&#39;s ...... Regular Season 10 Canada Women&#39;s 1 - 0 Cameroon Women&#39;s ...... Regular Season 11 Chile Women&#39;s 0 - 2 Sweden Women&#39;s ...... Regular Season 12 New Zealand Women&#39;s 0 - 1 Netherlands Women&#39;s ...... Regular Season 13 United States Women&#39;s 13 - 0 Thailand Women&#39;s ...... Regular Season 14 Nigeria Women&#39;s 2 - 0 Korea Republic Women&#39;s ...... Regular Season 15 Germany Women&#39;s 1 - 0 Spain Women&#39;s ...... Regular Season 16 France Women&#39;s 2 - 1 Norway Women&#39;s ...... Regular Season 17 Australia Women&#39;s 3 - 2 Brazil Women&#39;s ...... Regular Season 18 South Africa Women&#39;s 0 - 1 China PR Women&#39;s ...... Regular Season 19 Japan Women&#39;s 2 - 1 Scotland Women&#39;s ...... Regular Season 20 United States Women&#39;s 3 - 0 Chile Women&#39;s ...... Regular Season 21 Sweden Women&#39;s 5 - 1 Thailand Women&#39;s ...... Regular Season 22 Nigeria Women&#39;s 0 - 1 France Women&#39;s ...... Regular Season 23 South Africa Women&#39;s 0 - 4 Germany Women&#39;s ...... Regular Season 24 China PR Women&#39;s 0 - 0 Spain Women&#39;s ...... Regular Season 25 Korea Republic Women&#39;s 1 - 2 Norway Women&#39;s ...... Regular Season 26 Italy Women&#39;s 0 - 1 Brazil Women&#39;s ...... Regular Season 27 Jamaica Women&#39;s 1 - 4 Australia Women&#39;s ...... Regular Season 28 Japan Women&#39;s 0 - 2 England Women&#39;s ...... Regular Season 29 Sweden Women&#39;s 0 - 2 United States Women&#39;s ...... Regular Season 30 Cameroon Women&#39;s 2 - 1 New Zealand Women&#39;s ...... Regular Season 31 Netherlands Women&#39;s 2 - 1 Canada Women&#39;s ...... Regular Season 32 Thailand Women&#39;s 0 - 2 Chile Women&#39;s ...... Regular Season 33 Germany Women&#39;s 3 - 0 Nigeria Women&#39;s ...... Regular Season 34 England Women&#39;s 3 - 0 Cameroon Women&#39;s ...... Regular Season 35 France Women&#39;s 4 - 0 Korea Republic Women&#39;s ...... Regular Season 36 Norway Women&#39;s 3 - 0 Nigeria Women&#39;s ...... Regular Season 37 England Women&#39;s 1 - 0 Argentina Women&#39;s ...... Regular Season 38 Jamaica Women&#39;s 0 - 5 Italy Women&#39;s ...... Regular Season 39 Netherlands Women&#39;s 3 - 1 Cameroon Women&#39;s ...... Regular Season 40 Canada Women&#39;s 2 - 0 New Zealand Women&#39;s ...... Regular Season 41 France Women&#39;s 2 - 1 Brazil Women&#39;s ...... Regular Season 42 Netherlands Women&#39;s 2 - 1 Japan Women&#39;s ...... Regular Season 43 Italy Women&#39;s 2 - 0 China PR Women&#39;s ...... Regular Season 44 Norway Women&#39;s 0 - 3 England Women&#39;s ...... Regular Season 45 France Women&#39;s 1 - 2 United States Women&#39;s ...... Regular Season 46 England Women&#39;s 1 - 2 United States Women&#39;s ...... Regular Season 47 Netherlands Women&#39;s 1 - 0 Sweden Women&#39;s ...... Regular Season 48 England Women&#39;s 1 - 2 Sweden Women&#39;s ...... Regular Season 49 Italy Women&#39;s 0 - 2 Netherlands Women&#39;s ...... Regular Season 50 Germany Women&#39;s 1 - 2 Sweden Women&#39;s ...... Regular Season 51 United States Women&#39;s 2 - 0 Netherlands Women&#39;s ...... Regular Season . df_matches.loc[48][&#39;away_team&#39;] . {&#39;away_team_gender&#39;: &#39;female&#39;, &#39;away_team_group&#39;: &#39;Group F&#39;, &#39;away_team_id&#39;: 858, &#39;away_team_name&#39;: &#34;Sweden Women&#39;s&#34;, &#39;country&#39;: {&#39;id&#39;: 220, &#39;name&#39;: &#39;Sweden&#39;}} . match_id = 69301 home_team_id_required = 865 # England home_team_required = &quot;England Women&#39;s&quot; # England away_team_id_required = 858 # Sweden away_team_required = &quot;Sweden Women&#39;s&quot; # Sweden . Events . df_events = pd.read_json(path + f&#39;events/{str(match_id)}.json&#39;) df_shots_flatten = pd.DataFrame([flatten_json(x) for x in df_events[&#39;shot&#39;]]) . df_shots_flatten.shape print() df_events.shape . (3291, 157) . . (3291, 37) . Shots . from IPython.core.interactiveshell import InteractiveShell InteractiveShell.ast_node_interactivity = &quot;last&quot; . pitchLengthX= 120 pitchWidthY = 80 #lista = find_entry_3rdlevel(df_events[&#39;shot&#39;],&#39;outcome&#39;,&#39;name&#39;,&#39;Goal&#39;) #print(lista) lista = find_not_empty(df_events[&#39;shot&#39;]) fig=plt.figure(figsize=(15, 10)) ax=fig.add_subplot(1,1,1) createPitch(ax, pitchLengthX, pitchWidthY,&#39;yards&#39;) for i in lista: #location x = df_events[&#39;location&#39;].loc[i][0] y = df_events[&#39;location&#39;].loc[i][1] #COLOR = &#39;red&#39; #if df_shots_flatten.loc[i][&#39;outcome_name&#39;] == &#39;Goal&#39;: COLOR = &#39;blue&#39; #circleSize = 2 circleSize = np.sqrt(df_shots_flatten.loc[i][&#39;statsbomb_xg&#39;]*45) if df_events.loc[i][&#39;team&#39;][&#39;id&#39;] == home_team_id_required: COLOR = &#39;red&#39; shotCircle = plt.Circle( ( x, pitchWidthY-y ), circleSize, facecolor = COLOR) shotCircle.set_alpha(0.2) if df_shots_flatten.loc[i][&#39;outcome_name&#39;] == &#39;Goal&#39;: shotCircle.set_alpha(0.8) plt.text((x+1), (pitchWidthY-y+1), df_events.iloc[i][&#39;player&#39;][&#39;name&#39;]) else: COLOR = &#39;blue&#39; shotCircle = plt.Circle( ( pitchLengthX-x, y ), circleSize, facecolor = COLOR) shotCircle.set_alpha(0.2) if df_shots_flatten.loc[i][&#39;outcome_name&#39;] == &#39;Goal&#39;: shotCircle.set_alpha(0.8) plt.text((pitchLengthX-x+1), (y+1), df_events.iloc[i][&#39;player&#39;][&#39;name&#39;]) ax.add_patch(shotCircle) plt.text( 5, 75, away_team_required + &#39; shots&#39;) plt.text(80, 75, home_team_required + &#39; shots&#39;) . % not empty: 0.58% . Text(80, 75, &#34;England Women&#39;s shots&#34;) . Passes . pitchLengthX= 120 pitchWidthY = 80 #lista = find_entry_3rdlevel(df_events[&#39;shot&#39;],&#39;outcome&#39;,&#39;name&#39;,&#39;Goal&#39;) #print(lista) lista = find_not_empty(df_events[&#39;pass&#39;]) fig=plt.figure(figsize=(15, 10)) ax=fig.add_subplot(1,1,1) createPitch(ax, pitchLengthX, pitchWidthY,&#39;yards&#39;) for i in lista: #location x = df_events[&#39;location&#39;].loc[i][0] y = df_events[&#39;location&#39;].loc[i][1] circleSize = 2 if df_events.loc[i][&#39;team&#39;][&#39;id&#39;] == home_team_id_required: COLOR = &#39;red&#39; shotCircle = plt.Circle( ( x, pitchWidthY-y ), circleSize, facecolor = COLOR) shotCircle.set_alpha(0.3) else: COLOR = &#39;blue&#39; shotCircle = plt.Circle( ( pitchLengthX-x, y ), circleSize, facecolor = COLOR) shotCircle.set_alpha(0.3) ax.add_patch(shotCircle) plt.text( 5, 75, away_team_required + &#39; passes&#39;) plt.text(80, 75, home_team_required + &#39; passes&#39;) . % not empty: 27.99% . Text(80, 75, &#34;England Women&#39;s passes&#34;) . Sweden&#39;s passes . pitchLengthX= 120 pitchWidthY = 80 lista = find_not_empty(df_events[&#39;pass&#39;]) fig=plt.figure(figsize=(15, 10)) ax=fig.add_subplot(1,1,1) createPitch(ax, pitchLengthX, pitchWidthY,&#39;yards&#39;) for i in lista: #location x = df_events[&#39;location&#39;].loc[i][0] y = df_events[&#39;location&#39;].loc[i][1] circleSize = 2 if df_events.loc[i][&#39;team&#39;][&#39;id&#39;] == away_team_id_required: COLOR = &#39;blue&#39; shotCircle = plt.Circle( ( pitchLengthX-x, y ), circleSize, facecolor = COLOR) shotCircle.set_alpha(0.3) ax.add_patch(shotCircle) plt.text( 5, 75, away_team_required + &#39; passes&#39;) #plt.text(80, 75, home_team_required + &#39; passes&#39;) . % not empty: 27.99% . Text(5, 75, &#34;Sweden Women&#39;s passes&#34;) . Caroline Seger&#39;s passes . pitchLengthX= 120 pitchWidthY = 80 lista = find_entry_2ndlevel(df_events[&#39;player&#39;],&#39;name&#39;,&#39;Sara Caroline Seger&#39;) #lista = find_entry_2ndlevel(df_events[&#39;team&#39;], &#39;name&#39;, &quot;Sweden Women&#39;s&quot;) lista_pass = find_not_empty(df_events[&#39;pass&#39;]) lista = list(set(lista) &amp; set(lista_pass)) fig=plt.figure(figsize=(15, 10)) ax=fig.add_subplot(1,1,1) createPitch(ax, pitchLengthX, pitchWidthY,&#39;yards&#39;) COLOR = &#39;blue&#39; circleSize = 2 for i in lista: #location x = df_events[&#39;location&#39;].loc[i][0] y = df_events[&#39;location&#39;].loc[i][1] shotCircle = plt.Circle( ( x, pitchWidthY-y ), circleSize, facecolor = COLOR) shotCircle.set_alpha(0.3) ax.add_patch(shotCircle) plt.text( 5, 75, &quot;Sara Caroline Seger&#39;s&quot; + &#39; passes&#39;) . % Sara Caroline Seger: 3.31% % not empty: 27.99% . Text(5, 75, &#34;Sara Caroline Seger&#39;s passes&#34;) . Sara Caroline Seger&#39;s passes with arrows . pitchLengthX= 120 pitchWidthY = 80 lista = find_entry_2ndlevel(df_events[&#39;player&#39;],&#39;name&#39;,&#39;Sara Caroline Seger&#39;) #lista = find_entry_2ndlevel(df_events[&#39;team&#39;], &#39;name&#39;, &quot;Sweden Women&#39;s&quot;) lista_pass = find_not_empty(df_events[&#39;pass&#39;]) lista = list(set(lista) &amp; set(lista_pass)) #lista = [1921] #print(lista) fig=plt.figure(figsize=(15, 10)) ax=fig.add_subplot(1,1,1) createPitch(ax, pitchLengthX, pitchWidthY,&#39;yards&#39;) COLOR = &#39;blue&#39; HEAD_WIDTH = 1 HEAD_LENGTH= 2 for i in lista: #location x = df_events[&#39;location&#39;].loc[i][0] y = df_events[&#39;location&#39;].loc[i][1] dx = df_events[&#39;pass&#39;].loc[i][&#39;end_location&#39;][0] #x1 = pitchLengthX-x1 dx = dx-x dy = df_events[&#39;pass&#39;].loc[i][&#39;end_location&#39;][1] dy = dy-y ax.arrow(x, pitchWidthY-y, dx, dy, facecolor = COLOR, head_width=HEAD_WIDTH, head_length=HEAD_LENGTH) shotCircle = plt.Circle( ( x, pitchWidthY-y ), circleSize, facecolor = COLOR) shotCircle.set_alpha(0.3) ax.add_patch(shotCircle) plt.text( 5, 75, &quot;Sara Caroline Seger&#39;s&quot; + &#39; passes&#39;) . % Sara Caroline Seger: 3.31% % not empty: 27.99% . Text(5, 75, &#34;Sara Caroline Seger&#39;s passes&#34;) .",
            "url": "https://vascomano.github.io/Futebol/jupyter/2020/04/11/FoTlesson2.html",
            "relUrl": "/jupyter/2020/04/11/FoTlesson2.html",
            "date": " • Apr 11, 2020"
        }
        
    
  

  
  

  
      ,"page1": {
          "title": "About Me",
          "content": "",
          "url": "https://vascomano.github.io/Futebol/about/",
          "relUrl": "/about/",
          "date": ""
      }
      
  

  

  
  

  

  
  

  

  
  

  
  

  
  

  
      ,"page10": {
          "title": "",
          "content": "Sitemap: {{ “sitemap.xml” | absolute_url }} | .",
          "url": "https://vascomano.github.io/Futebol/robots.txt",
          "relUrl": "/robots.txt",
          "date": ""
      }
      
  

}